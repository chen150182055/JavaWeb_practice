## 通过条件搜索对应的商品信息

* 完成dao代码的编写模糊查询使用like关键字

  ```java
  /**
       * 	模糊搜索所有商品信息
       * @param search
       * @return
       */
      public List<Product> searchProduct(String search) {
  	QueryRunner qr=new QueryRunner(C3P0Utils.getDataSource());
  	String sql="select * from Product where pname like ? or pdesc like ?";
  	List<Product> list=null;
  	try {
  		list = qr.query(sql, new BeanListHandler<Product>(Product.class),search,search);
  	} catch (SQLException e) {
  		e.printStackTrace();
  	}
  	return list;
  }
  ```

* 编写对应的servlet代码：（SearchProductServlet）

  ```java
  protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
  	    String search=request.getParameter("search");
  		String s=request.getParameter("currentPage");
  		int currentPage=Integer.parseInt(s);
  		
  		
  		ProductDao productDao = new ProductDao();
  		List<Product> productList=productDao.searchProduct("%"+search+"%");
  		int n=12;
  		
  		int totalPage=0;
  		if(productList.size()%n>0) {
  		    totalPage = productList.size()/n+1;
  		}else {
  		    totalPage = productList.size()/n;
  		}
  		List<Product> productList1=new ArrayList<Product>();
  		for(int i=(currentPage-1)*n;i<currentPage*n&&i<productList.size();i++){
  			productList1.add(productList.get(i));
  		}
  		
  		
  		request.setAttribute("currentPage", currentPage);
  		request.setAttribute("totalPage", totalPage);
  		request.setAttribute("search", search);
  		request.setAttribute("productList", productList1);
  		request.getRequestDispatcher("search.jsp").forward(request, response);
  	}
  ```

  