## 项目主页商品展示效果的实现

* 首先在dao层中完成对商品表product的读取

  * 查询所有的商品分类创建查询商品分类的dao()

    ```java
    public class CategoryDao {
    
        private QueryRunner qr = new QueryRunner(C3P0Utils.getDataSource());
    
        /**
         * 查询商品分类
         * 
         * @return
         */
        public List<Category> getCategoryList() {
    	String sql = "SELECT *  FROM category";
    	List<Category> list = null;
    	try {
    	    list = qr.query(sql, new BeanListHandler<>(Category.class));
    	} catch (SQLException e) {
    	    e.printStackTrace();
    	}
    	return list;
        }
    
    }
    ```

    

  * 按照条件查询商品列表信息的dao()

    ```java
    public class ProductDao {
        
        private QueryRunner qr = new QueryRunner(C3P0Utils.getDataSource());
        
        /**
         * 获取热门商品
         * 
         * @return
         */
        public List<Product> getHotProductList(){
    	String sql = "SELECT * FROM product WHERE is_hot = 1 LIMIT 0,12";
    	List<Product> list = null;
    	try {
    	    list = qr.query(sql, new BeanListHandler<>(Product.class));
    	} catch (SQLException e) {
    	    e.printStackTrace();
    	}
    	return list;
        }
        
        /**
         * 获取最新的商品
         * 
         * @return
         */
        public List<Product> getNewProductList(){
    	String sql = "SELECT * FROM product ORDER BY pdate DESC LIMIT 0,12";
    	List<Product> list = null;
    	try {
    	    list = qr.query(sql, new BeanListHandler<>(Product.class));
    	} catch (SQLException e) {
    	    e.printStackTrace();
    	}
    	return list;
        }
    
    }
    ```

* 在IndexServlet中调用查询结果：(创建IndexServlet)

  ```java
  protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
  	    CategoryDao categoryDao = new CategoryDao();
  	    List<Category> categoryList = categoryDao.getCategoryList();
  	    HttpSession session = request.getSession();	//获取session会话对象
  	    session.setAttribute("categoryList", categoryList);//将查询到的商品分类存入到session会话中
  	    
  	    ProductDao productDao = new ProductDao();
  	    List<Product> hotProductList = productDao.getHotProductList();
  	    List<Product> newProductList = productDao.getNewProductList();
  	    
  	    request.setAttribute("hotProductList", hotProductList);
  	    request.setAttribute("newProductList", newProductList);
  	    
  	    request.getRequestDispatcher("index.jsp").forward(request, response);
  	}
  ```

  修改一下web.xml文件中的项目主页。改成IndexServlet





