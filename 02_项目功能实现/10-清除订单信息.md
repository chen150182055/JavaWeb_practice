## 清除订单信息

编写dao先判断子表中的数据 有就删除没有就直接删除订单记录dao(OrderDao)

```java
public int deleteOrderItemByOid(String oid) {
	//删除订单记录表中的信息前首先判断他的子表 中的有没有数据
	OrderItemDao orderItemDao = new OrderItemDao();
	//先删除子表中的数据
	List<OrderItem> orderItemByOid = orderItemDao.getOrderItemByOid(oid);
	if(orderItemByOid.size()>0) {
	    orderItemDao.deleteOrderItemByOid(oid);
	}
	
	//再删除主表中的数据
	String sql="delete from orders where oid= ?";
	int n=0;
	try {
		n = qr.update(sql,oid);
	} catch (SQLException e) {
		e.printStackTrace();
	}
	return n;
}
```

编写servlet代码：（DeleteOrderServlet）

```java
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
	    String oid=request.getParameter("oid");
	    
	    OrderDao orderDao = new OrderDao();
	    orderDao.deleteOrderItemByOid(oid);
	    
	    response.sendRedirect("OrderListServlet?currentPage=1");
	}
```



