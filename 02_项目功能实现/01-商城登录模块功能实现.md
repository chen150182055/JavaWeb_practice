## 商城登录模块功能的实现

* dao层编写完成

  * 在dao层编写对数据库数据库操作(UserDao)

    * 方法名：getUserByUsername(String username);

      ```java
      public class UserDao {
          
          private QueryRunner qr = new QueryRunner(C3P0Utils.getDataSource());
          
          public User getUserByUsername(String username) {
      	String sql = "SELECT * FROM USER WHERE username = ?";
      	User user = null;
      	try {
      	    user = qr.query(sql, new BeanHandler<User>(User.class), username);
      	} catch (SQLException e) {
      	    e.printStackTrace();
      	}
      	return user;
          }
          
          
      
      }
      ```

      

  * 在servlet中完成对dao层代码的调用（LoginServlet）

    ```java
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    	    String username = request.getParameter("username");
    	    String password = request.getParameter("password");
    	    
    	    UserDao userDao = new UserDao();
    	    User user = userDao.getUserByUsername(username);
    	    
    	    if(user!=null && user.getPassword().equals(password)) {
    		HttpSession session = request.getSession();
    		session.setAttribute("user", user);
    		response.sendRedirect("IndexServlet");
    	    }else {
    		
    		request.setAttribute("error", "账号或密码输入错误，请重新确认...");
    		request.getRequestDispatcher("login.jsp").forward(request, response);
    	    }
    	}
    ```

  * 创建一个IndexServlet准备用来初始化项目主页

    ```java
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    	    System.out.println("初始化项目主页...");
    	    request.getRequestDispatcher("index.jsp").forward(request, response);
    	}
    ```

    